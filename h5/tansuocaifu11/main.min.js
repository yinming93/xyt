var LoadingUI=function(t){function e(e){t.call(this),this.gameStage=e,this.createView()}__extends(e,t);var a=(__define,e),i=a.prototype;return i.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=640,this.textField.height=100,this.textField.textAlign="center"},i.setProgress=function(t,e){var a=t/e*100;this.textField.text="Loading..."+Math.floor(a)+"%"},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.call(this),this.armatures=[],this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var a=(__define,e),i=a.prototype;return i.onAddToStage=function(t){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json?v=7","resource/")},i.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("front")},i.onResourceLoadComplete=function(t){if(this.timeOnResourceLoadComplete=(new Date).getTime(),"front"==t.groupName){this.loadingView=new LoadingUI(this.stage),this.stage.addChild(this.loadingView);var e=this.stage.stageHeight,a=new dragonBones.EgretFactory,i=RES.getRes("BDlc01_ske_json"),s=RES.getRes("BDlc01_tex_json"),r=RES.getRes("BDlc01_tex_png");a.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(i)),a.addTextureAtlas(new dragonBones.EgretTextureAtlas(r,s)),this.armature1=a.buildArmature("Armature1"),this.armature1.display.x=0,this.armature1.display.y=e,this.armature1.display.scaleX=640/750,this.armature1.display.scaleY=.9088,dragonBones.WorldClock.clock.add(this.armature1),this.armature1.animation.gotoAndPlay("newAnimation"),this.loadingView.addChild(this.armature1.display),egret.Ticker.getInstance().register(function(t){dragonBones.WorldClock.clock.advanceTime(t/1e3)},this),this.armature1.animation.timeScale=.6,RES.loadGroup("preload")}"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.startLoadSound())},i.onItemLoadError=function(t){},i.onResourceLoadError=function(t){this.onResourceLoadComplete(t)},i.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},i.startLoadSound=function(){var t=new egret.URLLoader;t.dataFormat=egret.URLLoaderDataFormat.SOUND,t.addEventListener(egret.Event.COMPLETE,this.onLoadSoundComplete,this);var e="resource/sound/bgma2.mp3",a=new egret.URLRequest(e);t.load(a)},i.onLoadSoundComplete=function(t){this.createGameScene(),this.stage.removeChild(this.loadingView),this.addChild(this.armature3.display),this.armature3.animation.gotoAndPlay("newAnimation"),this.swapChildren(this.fg,this.armature3.display);var e=t.target;this.sound=e.data,this.soundChannel=this.sound.play(0,1),this.soundChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)},i.onSoundComplete=function(t){},i.createGameScene=function(){var t=this.stage.stageWidth,e=this.stage.stageHeight;this.bg=this.createBitmapByName("bg_jpg"),this.bg.x=0,this.bg.y=0,this.bg.width=t,this.bg.height=e,this.bg.touchEnabled=!1,this.addChild(this.bg),this.fg=this.createBitmapByName("fg_png"),this.fg.x=0,this.fg.y=0,this.fg.width=t,this.fg.height=e,this.fg.touchEnabled=!1,this.fg.$alpha=1,this.addChild(this.fg);var a=new dragonBones.EgretFactory,i=RES.getRes("BDlc02_ske_json"),s=RES.getRes("BDlc02_tex_json"),r=RES.getRes("BDlc02_tex_png"),n=RES.getRes("BDlc03_ske_json"),h=RES.getRes("BDlc03_tex_json"),d=RES.getRes("BDlc03_tex_png"),o=RES.getRes("BDlc04_ske_json"),l=RES.getRes("BDlc04_tex_json"),g=RES.getRes("BDlc04_tex_png"),c=RES.getRes("BDlc05_ske_json"),u=RES.getRes("BDlc05_tex_json"),m=RES.getRes("BDlc05_tex_png"),p=RES.getRes("BDlc06_ske_json"),E=RES.getRes("BDlc06_tex_json"),b=RES.getRes("BDlc06_tex_png");a.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(i)),a.addTextureAtlas(new dragonBones.EgretTextureAtlas(r,s)),a.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(n)),a.addTextureAtlas(new dragonBones.EgretTextureAtlas(d,h)),a.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(o)),a.addTextureAtlas(new dragonBones.EgretTextureAtlas(g,l)),a.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(c)),a.addTextureAtlas(new dragonBones.EgretTextureAtlas(m,u)),a.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(p)),a.addTextureAtlas(new dragonBones.EgretTextureAtlas(b,E)),this.armature2=a.buildArmature("Armature2"),this.armature3=a.buildArmature("Armature3"),this.armature4=a.buildArmature("Armature4"),this.armature5=a.buildArmature("Armature5"),this.armature6=a.buildArmature("Armature6"),this.armature2.display.x=0,this.armature2.display.y=e,this.armature2.display.scaleX=640/750,this.armature2.display.scaleY=.9088,dragonBones.WorldClock.clock.add(this.armature2),this.armature3.display.x=0,this.armature3.display.y=e,this.armature3.display.scaleX=640/750,this.armature3.display.scaleY=.9088,dragonBones.WorldClock.clock.add(this.armature3),this.armature4.display.x=0,this.armature4.display.y=e,this.armature4.display.scaleX=640/750,this.armature4.display.scaleY=.9088,dragonBones.WorldClock.clock.add(this.armature4),this.armature5.display.x=0,this.armature5.display.y=e,this.armature5.display.scaleX=640/750,this.armature5.display.scaleY=.9088,dragonBones.WorldClock.clock.add(this.armature5),this.armature6.display.x=0,this.armature6.display.y=e,this.armature6.display.scaleX=640/750,this.armature6.display.scaleY=.9088,dragonBones.WorldClock.clock.add(this.armature6),this.armature2.addEventListener(dragonBones.AnimationEvent.START,this.a2StartPlay,this),this.armature2.addEventListener(dragonBones.AnimationEvent.COMPLETE,this.a2Complete,this),this.armature3.addEventListener(dragonBones.AnimationEvent.START,this.a3StartPlay,this),this.armature3.addEventListener(dragonBones.AnimationEvent.COMPLETE,this.a3Complete,this),this.armature4.addEventListener(dragonBones.AnimationEvent.START,this.a4StartPlay,this),this.armature4.addEventListener(dragonBones.AnimationEvent.COMPLETE,this.a4Complete,this),this.armature5.addEventListener(dragonBones.AnimationEvent.START,this.a5StartPlay,this),this.armature5.addEventListener(dragonBones.AnimationEvent.COMPLETE,this.a5Complete,this),this.armature6.addEventListener(dragonBones.AnimationEvent.START,this.a6StartPlay,this),this.armature6.addEventListener(dragonBones.AnimationEvent.COMPLETE,this.a6Complete,this),dragonBones.WorldClock.clock.timeScale=.8},i.createBitmapByName=function(t){var e=new egret.Bitmap,a=RES.getRes(t);return e.texture=a,e},i.fadeOut=function(t){var e=egret.Tween.get(t);e.to({alpha:0},500)},i.a3StartPlay=function(t){},i.a3Complete=function(t){this.removeChild(this.armature3.display),this.addChild(this.armature4.display),this.swapChildren(this.fg,this.armature4.display),this.armature4.animation.gotoAndPlay("newAnimation")},i.a4StartPlay=function(t){},i.a4Complete=function(t){this.removeChild(this.armature4.display),this.addChild(this.armature5.display),this.swapChildren(this.fg,this.armature5.display),this.armature5.animation.gotoAndPlay("newAnimation")},i.a5StartPlay=function(t){},i.a5Complete=function(t){this.removeChild(this.armature5.display),this.addChild(this.armature6.display),this.swapChildren(this.fg,this.armature6.display),this.armature6.animation.gotoAndPlay("newAnimation")},i.a6StartPlay=function(t){},i.a6Complete=function(t){this.removeChild(this.armature6.display),this.addChild(this.armature2.display),this.swapChildren(this.fg,this.armature2.display),this.armature2.animation.gotoAndPlay("newAnimation")},i.a2StartPlay=function(t){},i.a2Complete=function(t){var e=this;this.removeChild(this.armature2.display),this.shareView=new ShareUI(this.stage),this.p2View=new Page2(this.stage,this.shareView),this.addChild(this.p2View),this.swapChildren(this.fg,this.p2View),this.addChild(this.shareView);var a=new egret.URLLoader;a.addEventListener(egret.Event.COMPLETE,function(t){e.p2View.ani();var i=a.data;setTimeout(function(){i.play(0,1)},2500)},this),a.dataFormat=egret.URLLoaderDataFormat.SOUND,a.load(new egret.URLRequest("resource/sound/niyiwei2.mp3"))},i.frame_event=function(t){},i.sound_event=function(t){},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Page2=function(t){function e(e,a){t.call(this),this.txts=[],this.gameStage=e,this.shareView=a,this.createView(),this.alpha=.5,this.stageW=this.gameStage.stageWidth,this.stageH=this.gameStage.stageHeight}__extends(e,t);var a=(__define,e),i=a.prototype;return i.createView=function(){var t=this.gameStage.stageWidth,e=this.gameStage.stageHeight,a=this,i=this.createBitmapByName("p2_bg2_jpg");i.width=t,i.height=e,i.alpha=1,i.x=0,i.y=0,this.addChild(i);var s=new egret.Sprite;s.width=t,s.height=e,s.alpha=1,s.x=0,s.y=0;for(var r=1;5>=r;r++){var n=this.createBitmapByName("p2_txt"+r+"_png");n.width=t,n.height=e,n.x=0,n.y=50,n.alpha=0,s.addChild(n),this.txts[r]=n}this.addChild(s),this.txtBox=s,this.bdBox=new egret.Sprite,this.bdBox.width=t,this.bdBox.height=e,this.bdBox.alpha=1,this.bdBox.x=0,this.bdBox.y=0,this.bdHeadb=this.createBitmapByName("p2_bdhead_png"),this.bdHeadb.width=t,this.bdHeadb.height=e,this.bdHeadb.alpha=0,this.bdHeadb.y=e/4,this.bdLogo=this.createBitmapByName("p2_logo_png"),this.bdLogo.width=t,this.bdLogo.height=e,this.bdLogo.alpha=0,this.bdBtnAdd=this.createBitmapByName("p2_bdadd_png"),this.bdBtnAdd.width=t,this.bdBtnAdd.height=e,this.bdBtnAdd.alpha=0,this.bdBtnAdd.y=e/4,this.bdBtns=this.createBitmapByName("p2_btns_png"),this.bdBtns.width=t,this.bdBtns.height=e,this.bdBtns.alpha=0,this.bdBtns.y=e/4,this.bdTxt1=this.createBitmapByName("p2_bdtxt1_png"),this.bdTxt1.width=t,this.bdTxt1.height=e,this.bdTxt1.alpha=0,this.bdTxt1.scaleX=.2,this.bdTxt1.scaleY=.2,this.bdTxt1.x=t/2,this.bdTxt1.y=e/2,this.bdTxt1.anchorOffsetX=t/2,this.bdTxt1.anchorOffsetY=e/2,this.bdTxt2=this.createBitmapByName("p2_bdtxt2_png"),this.bdTxt2.width=t,this.bdTxt2.height=e,this.bdTxt2.alpha=0,this.bdTxt2.scaleX=.2,this.bdTxt2.scaleY=.2,this.bdTxt2.x=t/2,this.bdTxt2.y=e/2,this.bdTxt2.anchorOffsetX=t/2,this.bdTxt2.anchorOffsetY=e/2,this.bdClick=this.createBitmapByName("p2_bdclick_png"),this.bdClick.width=.06*t,this.bdClick.height=.048*e,this.bdClick.x=.66*t,this.bdClick.y=.34*e+e/6,this.bdClick.alpha=0;var h=new egret.Shape;h.graphics.beginFill(16777215),h.graphics.drawRect(0,0,.34*t,.06*e),h.graphics.endFill(),h.alpha=0,h.x=.52*t,h.y=.77*e,h.touchEnabled=!1,h.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){a.shareView.show()},this),this.btnShare=h;var d=new egret.Shape;d.graphics.beginFill(16777215),d.graphics.drawRect(0,0,.34*t,.06*e),d.graphics.endFill(),d.alpha=0,d.x=.15*t,d.y=.77*e,d.touchEnabled=!1,d.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){window.location.href="#"},this),this.btnLink=d,this.addChild(this.bdBox),this.bdBox.addChild(this.bdHeadb),this.bdBox.addChild(this.bdTxt1),this.bdBox.addChild(this.bdTxt2),this.bdBox.addChild(this.bdLogo),this.bdBox.addChild(this.bdBtnAdd),this.bdBox.addChild(this.bdClick),this.bdBox.addChild(this.bdBtns),this.bdBox.addChild(this.btnLink),this.bdBox.addChild(this.btnShare)},i.createBitmapByName=function(t){var e=new egret.Bitmap,a=RES.getRes(t);return e.texture=a,e.width=this.stageW,e.height=this.stageH,e.x=0,e.y=0,e},i.aniBdBox=function(){var t=this,e=egret.Tween.get(this.bdHeadb),a=egret.Tween.get(this.bdTxt1),i=egret.Tween.get(this.bdTxt2),s=egret.Tween.get(this.bdLogo),r=egret.Tween.get(this.bdBtnAdd),n=(egret.Tween.get(this.bdBtnAdd),egret.Tween.get(this.bdClick)),h=egret.Tween.get(this.bdBtns),d=egret.Tween.get(t.bdClick,{loop:!0});e.to({alpha:1,y:0},1200,egret.Ease.backInOut),r.to({alpha:1,y:0},1200,egret.Ease.backInOut).wait(2300).to({alpha:1,y:0,x:.09*t.stageW},600,egret.Ease.backInOut),n.wait(500).to({alpha:1,y:.34*t.stageH},1200,egret.Ease.backInOut).call(function(){d.to({scaleX:1.2,scaleY:1.2},400,egret.Ease.backInOut).to({scaleX:1,scaleY:1},400,egret.Ease.backInOut).to({scaleX:1.2,scaleY:1.2},400,egret.Ease.backInOut).to({scaleX:1,scaleY:1},400,egret.Ease.backInOut)}).wait(2e3).to({alpha:0,y:t.stageH},300),s.wait(3200).to({alpha:1,y:0,x:.001*-t.stageW},1e3),a.wait(4e3).to({alpha:1,scaleX:1,scaleY:1},700,egret.Ease.backInOut),i.wait(5e3).to({alpha:1,scaleX:1,scaleY:1},700,egret.Ease.backInOut),h.wait(6500).to({alpha:1,y:0},700,egret.Ease.backInOut).call(function(){t.btnShare.touchEnabled=!0,t.btnLink.touchEnabled=!0})},i.aniTxtBox=function(){for(var t=this,e=function(e){setTimeout(function(){var a=egret.Tween.get(t.txts[e]);a.to({alpha:1,y:0},800,egret.Ease.circInOut)},1500*e)},a=1;5>=a;a++)e(a);var i=egret.Tween.get(this.txtBox);t.txtBox.anchorOffsetX=t.txtBox.width/2,t.txtBox.anchorOffsetY=t.txtBox.height/3,t.txtBox.x=t.txtBox.width/2,t.txtBox.y=t.txtBox.height/3,i.wait(9e3).to({alpha:0,scaleX:10,scaleY:10},500)},i.ani=function(t){var e=this,a=egret.Tween.get(this);a.to({alpha:1},500),this.aniTxtBox(),setTimeout(function(){e.aniBdBox()},9e3)},e}(egret.Sprite);egret.registerClass(Page2,"Page2");var ShareUI=function(t){function e(e){t.call(this),this.UItouchEnabled=!1,this.gameStage=e,this.createView(),this.alpha=0}__extends(e,t);var a=(__define,e),i=a.prototype;return i.createView=function(){var t=this.gameStage.stageWidth,e=this.gameStage.stageHeight,a=new egret.Shape;a.graphics.beginFill(0),a.graphics.drawRect(0,0,t,e),a.graphics.endFill(),a.alpha=.7,a.x=0,a.y=0,this.addChild(a),this.sharehint=this.createBitmapByName("sharehint_png"),this.sharehint.x=0,this.sharehint.y=0,this.sharehint.width=t,this.sharehint.height=e,this.sharehint.touchEnabled=!1,this.sharehint.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addChild(this.sharehint)},i.onClick=function(){this.UItouchEnabled=!1,this.sharehint.touchEnabled=this.UItouchEnabled,this.hide()},i.createBitmapByName=function(t){var e=new egret.Bitmap,a=RES.getRes(t);return e.texture=a,e},i.show=function(){var t=this,e=egret.Tween.get(this);e.to({alpha:1},100).call(function(){t.UItouchEnabled=!0,t.sharehint.touchEnabled=t.UItouchEnabled},self)},i.hide=function(){var t=egret.Tween.get(this);t.to({alpha:0},100).call(function(){},self)},e}(egret.Sprite);egret.registerClass(ShareUI,"ShareUI");