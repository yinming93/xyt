!function(e){"use strict";function n(e,n){for(var t in n)e[t]||(e[t]=n[t])}function t(e,t){n(e.prototype,t)}function i(e){var n=e.match(X),t=n[1],i=n[2]||"*",a=n[3]||"";return o({n:t,v:i,p:a})}function o(e){var n=e.n+"@"+e.v;return e.id=n+e.p,e.k=n,e}function a(e,n){return n.map?e:e+".js"}function r(e,n){for(var t in n)e[t]=n[t]}function s(e){var n=e.match($);return n?n[0]:e}function c(e,n){return p(s(n.p).slice(1),e)}function u(e,n){return e=c(e,n),e?n.k+"/"+e:n.k}function p(e,n){var t=(e+"/"+n).split("/").filter(Boolean);return l(t).join("/")}function l(e){for(var n=0,t=e.length-1;t>=0;t--){var i=e[t];"."===i?e.splice(t,1):".."===i?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}for(;n--;)e.unshift("..");return e}function f(e){return 0===e.indexOf("./")||0===e.indexOf("../")}function d(e){throw new Error("neuron: "+e)}function h(e){d("Cannot find module '"+e+"'")}function g(e){return Q[e]||(Q[e]=[])}function m(e,n){g(e).push(n)}function v(e,n){var t=g(e);t.forEach(function(e){e(n)})}function y(e,n){e||d("null id"),n||(n={});var t=n.map||{};e=t[e]||e;var r,s=f(e);if(s?(n.id||h(e),e=u(e,n),e=a(e,n),r=i(e)):(e=n.m&&n.m[e]||e,r=i(e)),r.k===n.k)r.graph=n.graph;else{var c=b(r.k,n.graph)||[];r.graph=c,r.v=c[0]||r.v,o(r)}return r}function b(e,n){var t=te.graph._,i=n?n[1]:t;return i&&e in i?te.graph[i[e]]:t}function w(e){return e.loaded?e.exports:_(e)}function _(e){e.loaded=!0;var n=e.exports={},t=P(e.id),i=s(t),o=e.factory;return o(S(e),n,e,t,i),e.exports}function k(e,n,t){var i=y(e,n),o=i.graph,a=I(i),r=a.main?i.k:i.id,s=o[r];return s||(!t||h(e),s=o[r]=C(a),s.graph=o,s.g||(s.g=G++)),s}function x(e,n){W.ready(e,function(){n(w(e))})}function I(e){var n=e.id;return oe[n]||(oe[n]={n:e.n,v:e.v,p:e.p,id:n,k:e.k,m:{},l:[],main:!e.p})}function C(e){function n(){this.r=[]}return n.prototype=e,new n}function R(e){!~e.indexOf("@")||d("id with '@' is prohibited")}function S(e){var n=function(n){R(n);var t=k(n,e,!0);return w(t)};return n.async=function(n,t){var i=n;if(t){R(n);var o=f(n);if(o){n=u(n,e);var r=e.entries;n=r?T(n,r)||T(n+".js",r)||T(n+".json",r)||h(i):a(n,e)}var s=k(n,e);if(!s.main){if(!o)return;s.a=!0}x(s,t)}},n.resolve=function(n){return f(n)&&(n=c(n,e),!~n.indexOf("../"))?P(e.k+"/"+n):void 0},n}function T(e,n){return~n.indexOf(e)?e:J}function A(e){var n=Y.createElement("script");n.src=e,n.async=!0,ee(n,function(){Z.removeChild(n)}),Z.insertBefore(n,Z.firstChild)}function E(e,n,t,i){i||(i={});var s=y(e);s.p&&(s.p=a(s.p,i),o(s));var c,u=s.k;i.main&&(c=oe[u]);var p=oe[s.id]=c||oe[s.id]||I(s);if(i.main&&(oe[u]=p,r(p,s)),r(p,i),!p.factory){p.factory=t,p.deps=n,j(n,p.m);var l=i.asyncDeps;l&&j(l,p.m),N(p,"l")}}function j(e,n){e.forEach(function(e){var t=e.split("@")[0];n[t]=e})}function N(e,n){var t,i=e[n];for(e[n]=J;t=i.pop();)t()}function O(e,n){var t=oe[e.id];t.f=e.f,t.a=e.a;var i=t.l;i&&(i.push(n),i.length<2&&D(t))}function D(e){if(!e.d){e.d=!0;var n=e.f,t=e.a,i=e.k;if(~ne.indexOf(i)){if(!n&&!t)return}else ne.push(i);var o=te.loaded,a=n?e.id:i;if(~o.indexOf(a)){if(!t)return}else o.push(a);A(M(e))}}function M(e){var n=e.main?e.k+"/"+e.n+".js":e.id;return P(n)}function P(e){var n=e.replace("@","/"),t=te.path;return t||d("config.path must be specified"),t=t.replace("{n}",n.length%3+1),n+=te.cache===!1?"?f="+z:"",t+n}function U(e,n,t){if(v("beforeready",V(e)+":"+e.g),!e.factory)return v("beforeload",e.id),O(e,function(){v("load",V(e)),U(e,n,t)});var i=e.deps,o=i.length,a=e.r;if(!o||!a)return e.r=J,L(e),n();if(a.push(n),!(a.length>1)){var r=function(){--o||(t.length=0,t=H,L(e),N(e,"r"))};t=t?[e].concat(t):[e],i.forEach(function(n){var i=k(n,e);return~t.indexOf(i)?r():void U(i,r,t)})}}function L(e){v("ready",V(e)+":"+e.g)}function V(e){return e.main?e.k:e.id}function B(e){return e}function F(e){var n,t;for(n in e)t=ie[n],t&&(te[n]=t(e[n]))}function q(e,n){var t=k(e);t.f=!0,x(t,n)}var W={version:"7.1.2"},H=null,J=!1,z=+new Date;W.ready=function(e,n){n()};var K=TypeError;t(Array,{indexOf:function(e,n){var t=this.length>>>0;for(n=Number(n)||0,n=Math[0>n?"ceil":"floor"](n),0>n&&(n=Math.max(n+t,0));t>n;n++)if(n in this&&this[n]===e)return n;return-1},lastIndexOf:function(e,n){var t=this.length>>>0;for(n=Number(n)||t-1,n=Math[0>n?"ceil":"floor"](n),0>n&&(n+=t),n=Math.min(n,t-1);n>=0;n--)if(n in this&&this[n]===e)return n;return-1},filter:function(e,n){for(var t=[],i=0,o=this.length;o>i;i++)i in this&&e.call(n,this[i],i,this)&&t.push(this[i]);return t},forEach:function(e,n){for(var t=0,i=this.length;i>t;t++)t in this&&e.call(n,this[t],t,this)},every:function(e,n){for(var t=0,i=this.length;i>t;t++)if(t in this&&!e.call(n,this[t],t,this))return!1;return!0},map:function(e,n){for(var t=[],i=0,o=this.length;o>i;i++)i in this&&(t[i]=e.call(n,this[i],i,this));return t},some:function(e,n){for(var t=0,i=this.length;i>t;t++)if(t in this&&e.call(n,this[t],t,this))return!0;return!1},reduce:function(e){if("function"!=typeof e)throw new K(e+" is not an function");var n,t=this,i=t.length>>>0,o=0;if(arguments.length>1)n=arguments[1];else for(;;){if(o in t){n=t[o++];break}if(++o>=i)throw new K("Reduce of empty array with on initial value")}for(;i>o;o++)o in t&&(n=e.call(H,n,t[o],o,t));return n},reduceRight:function(e){if("function"!=typeof e)throw new K(e+" is not an function");var n,t=this,i=t.length>>>0,o=i-1;if(arguments.length>1)n=arguments[1];else for(;;){if(o in t){n=t[o--];break}if(--o<0)throw new K("Reduce of empty array with on initial value")}for(;o>=0;o--)o in t&&(n=e.call(H,n,t[o],o,t));return n}}),n(Object,{keys:function(){var e=Object.prototype.hasOwnProperty,n=!{toString:""}.propertyIsEnumerable("toString"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=t.length;return function(o){if(o!==Object(o))throw new K("Object.keys called on non-object");var a,r=[];for(a in o)e.call(o,a)&&r.push(a);if(n)for(var s=0;i>s;s++)e.call(o,t[s])&&r.push(t[s]);return r}}()}),t(String,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});var X=/^((?:[^\/])+?)(?:@([^\/]+))?(\/.*)?$/,$=/.*(?=\/.*$)/,Q={};W.on=m;var G=1,Y=document,Z=Y.getElementsByTagName("head")[0],ee=Y.createElement("script").readyState?function(e,n){e.onreadystatechange=function(){var t=e.readyState;("loaded"===t||"complete"===t)&&(e.onreadystatechange=H,n.call(this))}}:function(e,n){e.addEventListener("load",n,!1)},ne=[];W.ready=U;var te=W.conf={loaded:[],graph:{_:{}}},ie={path:function(e){return e.replace(/\/*$/,"/")},loaded:B,graph:B,cache:B};W.config=F,e.neuron=W,e.define=E,e.facade=function(e){q(e.entry,function(n){n.init&&n.init(e.data)})},e._use=function(e,n){q(e,n)},e._load=A;var oe=W.mods={}}(this),neuron.config({graph:{0:["1.3.3",{"dpapp-core@^1.1.1":1,"mix@^1.0.1":2,"dpapp-share@~0.1.0":5}],1:["1.1.2",{"mix@^1.0.1":2,"promise@^6.1.0":3}],2:["1.0.1"],3:["6.1.0",{"asap@^1.0.0":4}],4:["1.0.0"],5:["0.1.0"],_:{"dpapp@1.3.3":0,"dpapp@*":0}}}),neuron.config({path:"http://www.dpfile.com/mod/"}),function(){var e="asap@1.0.0/asap.js",n={},t=n;define(e,[],function(e,n,t,i,o){function a(){for(;s.next;){s=s.next;var e=s.task;s.task=void 0;var n=s.domain;n&&(s.domain=void 0,n.enter());try{e()}catch(t){if(l)throw n&&n.exit(),setTimeout(a,0),n&&n.enter(),t;setTimeout(function(){throw t},0)}n&&n.exit()}u=!1}function r(e){c=c.next={task:e,domain:l&&process.domain,next:null},u||(u=!0,p())}var s={task:void 0,next:null},c=s,u=!1,p=void 0,l=!1;if("undefined"!=typeof process&&process.nextTick)l=!0,p=function(){process.nextTick(a)};else if("function"==typeof setImmediate)p="undefined"!=typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!=typeof MessageChannel){var f=new MessageChannel;f.port1.onmessage=a,p=function(){f.port2.postMessage(0)}}else p=function(){setTimeout(a,0)};t.exports=r},{main:!0,map:t})}(),function(){function e(e,n){for(var t in n)e[t]=n[t];return e}var n="asap@^1.0.0",t="promise@6.1.0/lib/core.js",i="promise@6.1.0/lib/es6-extensions.js",o="promise@6.1.0/polyfill-done.js",a="promise@6.1.0/polyfill.js",r={},s=r;define(a,[n,t,i,o],function(e,n,t,i,o){e("asap");"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js"),t.exports=Promise},{main:!0,map:e({"./lib/core.js":t,"./lib/es6-extensions.js":i,"./polyfill-done.js":o},s)}),define(t,[n],function(e,n,t,i,o){"use strict";function a(e){function n(e){return null===a?void p.push(e):void c(function(){var n=a?e.onFulfilled:e.onRejected;if(null===n)return void(a?e.resolve:e.reject)(u);var t;try{t=n(u)}catch(i){return void e.reject(i)}e.resolve(t)})}function t(e){try{if(e===l)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void s(n.bind(e),t,i)}a=!0,u=e,o()}catch(r){i(r)}}function i(e){a=!1,u=e,o()}function o(){for(var e=0,t=p.length;t>e;e++)n(p[e]);p=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var a=null,u=null,p=[],l=this;this.then=function(e,t){return new l.constructor(function(i,o){n(new r(e,t,i,o))})},s(e,t,i)}function r(e,n,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.resolve=t,this.reject=i}function s(e,n,t){var i=!1;try{e(function(e){i||(i=!0,n(e))},function(e){i||(i=!0,t(e))})}catch(o){if(i)return;i=!0,t(o)}}var c=e("asap");t.exports=a},{map:s}),define(i,[n,t],function(e,n,t,i,o){"use strict";function a(e){this.then=function(n){return"function"!=typeof n?this:new r(function(t,i){s(function(){try{t(n(e))}catch(o){i(o)}})})}}var r=e("./core.js"),s=e("asap");t.exports=r,a.prototype=r.prototype;var c=new a(!0),u=new a(!1),p=new a(null),l=new a(void 0),f=new a(0),d=new a("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return p;if(void 0===e)return l;if(e===!0)return c;if(e===!1)return u;if(0===e)return f;if(""===e)return d;if("object"==typeof e||"function"==typeof e)try{var n=e.then;if("function"==typeof n)return new r(n.bind(e))}catch(t){return new r(function(e,n){n(t)})}return new a(e)},r.all=function(e){var n=Array.prototype.slice.call(e);return new r(function(e,t){function i(a,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(e){i(a,e)},t)}n[a]=r,0===--o&&e(n)}catch(c){t(c)}}if(0===n.length)return e([]);for(var o=n.length,a=0;a<n.length;a++)i(a,n[a])})},r.reject=function(e){return new r(function(n,t){t(e)})},r.race=function(e){return new r(function(n,t){e.forEach(function(e){r.resolve(e).then(n,t)})})},r.prototype["catch"]=function(e){return this.then(null,e)}},{map:e({"./core.js":t},s)}),define(o,[],function(e,n,t,i,o){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(e,n){var t=arguments.length?this.then.apply(this,arguments):this;t.then(null,function(e){setTimeout(function(){throw e},0)})})},{map:s})}(),function(){var e="mix@1.0.1/index.js",n={},t=n;define(e,[],function(e,n,t,i,o){"use strict";function a(e,n,t,i){if(!n||!e)return e;var o,a,r=0;if(t=t||2===arguments.length,i&&(a=i.length))for(;a>r;r++)o=i[r],!(o in n)||!t&&o in e||(e[o]=n[o]);else for(o in n)!t&&o in e||(e[o]=n[o]);return e}t.exports=a},{main:!0,map:t})}(),function(){function e(e,n){for(var t in n)e[t]=n[t];return e}var n="promise@^6.1.0",t="dpapp-core@1.1.2/lib/network.js",i="dpapp-core@1.1.2/lib/core.js",o="dpapp-core@1.1.2/lib/native-core.js",a="dpapp-core@1.1.2/lib/apis.js",r="dpapp-core@1.1.2/lib/decorate.js",s="dpapp-core@1.1.2/lib/queue.js",c="dpapp-core@1.1.2/lib/index.js",u={},p=u;define(c,[n,t,i,o],function(e,n,t,i,o){var a=e("./core"),r=e("./native-core"),s=e("./network"),c=e("promise");a.prototype._mixin(a.prototype,r),a.prototype._mixin(a.prototype,s),a.prototype.all=function(e){return c.all(e)},t.exports=a},{main:!0,map:e({"./network":t,"./core":i,"./native-core":o},p)}),define(t,[],function(e,n,t,i,o){t.exports={_iOSNetworkType:function(e){function n(e){switch(e){case"CTRadioAccessTechnologyGPRS":case"CTRadioAccessTechnologyEdge":case"CTRadioAccessTechnologyCDMA1x":return"2g";case"CTRadioAccessTechnologyLTE":return"4g";case"CTRadioAccessTechnologyWCDMA":case"CTRadioAccessTechnologyHSDPA":case"CTRadioAccessTechnologyHSUPA":case"CTRadioAccessTechnologyCDMA1x":case"CTRadioAccessTechnologyCDMAEVDORev0":case"CTRadioAccessTechnologyCDMAEVDORevA":case"CTRadioAccessTechnologyCDMAEVDORevB":case"CTRadioAccessTechnologyeHRPD":return"3g"}}var t,i={kSCNetworkReachabilityFlagsTransientConnection:1,kSCNetworkReachabilityFlagsReachable:2,kSCNetworkReachabilityFlagsConnectionRequired:4,kSCNetworkReachabilityFlagsConnectionOnTraffic:8,kSCNetworkReachabilityFlagsInterventionRequired:16,kSCNetworkReachabilityFlagsConnectionOnDemand:32,kSCNetworkReachabilityFlagsIsLocalAddress:65536,kSCNetworkReachabilityFlagsIsDirect:1<<17,kSCNetworkReachabilityFlagsIsWWAN:1<<18},o=+e.type,a=e.subType;return 0==(o&i.kSCNetworkReachabilityFlagsReachable)?"none":(0==(o&i.kSCNetworkReachabilityFlagsConnectionRequired)&&(t="wifi"),(0!=(o&i.kSCNetworkReachabilityFlagsConnectionOnDemand)||0!=(o&i.kSCNetworkReachabilityFlagsConnectionOnTraffic))&&0==(o&i.kSCNetworkReachabilityFlagsInterventionRequired)&&(t="wifi"),(o&i.kSCNetworkReachabilityFlagsIsWWAN)==i.kSCNetworkReachabilityFlagsIsWWAN&&(t=n(a)),t)},_androidNetworkType:function(e){var n=e.type,t=e.subType;if(0==n)switch(t){case 1:case 2:case 4:case 7:case 11:return"2g";case 3:case 5:case 6:case 8:case 9:case 10:case 12:case 14:case 15:return"3g";case 13:return"4g"}return 1==n?"wifi":"none"},getNetworkType:function(e){var n=this,t=e.success;this._send("getNetworkType",{success:function(e){var i,o=n._osUA;switch(o.name){case"iphone":i=this._iOSNetworkType(e);break;case"android":i=this._androidNetworkType(e)}t&&t({networkType:i,raw:{type:e.type,subType:e.subType}})},fail:e.fail})}}},{map:p}),define(i,[a,r],function(e,n,t,i,o){function a(e,n){for(var t in n)e[t]=n[t];return e}var r=t.exports=function(n){n=n||{};var t=this;for(var i in n)this[i]=n[i];var o=n.apis||e("./apis");(n.extraApis||[]).forEach(function(e){-1===o.indexOf(e)&&o.push(e)}),this.apis=o,this.allowBeforeReady=this.allowBeforeReady||["getRequestId"],o.forEach(function(e){t[e]||(t[e]=function(n){t._send(e,n)})}),this.decorate()};r.prototype={_cfg:{debug:!1},_isProduct:!!location.href.match(".dianping.com"),_isReady:!1,config:function(e){for(var n in e)this._cfg[n]=e[n]},isOldVersion:function(){return!1},getQuery:function(){var e=location.search.slice(1),n={};return e.split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),n},patchForType:function(e,n){this.uaType()==e&&(this.extend(n),this.decorate())},decorate:e("./decorate"),Semver:{eq:function(e,n){return e===n},gt:function(e,n){var t=e?e.split("."):[],i=n?n.split("."):[];return[0,1,2].forEach(function(e){t[e]=t[e]||0,i[e]=i[e]||0}),+t[0]!==+i[0]?+t[0]>+i[0]:+t[1]!==+i[1]?+t[1]>+i[1]:+t[2]>+(i[2]||0)},lt:function(e,n){return!this.gte(e,n)},gte:function(e,n){return this.eq(e,n)||this.gt(e,n)},lte:function(e,n){return this.eq(e,n)||this.lt(e,n)}},_parseUA:function(e){var n,t,i;return e.match(/iPhone/)?(n="iphone",t=e.match(/iPhone\sOS\s([\d_]+)/i)[1].replace(/_/g,".")):e.match(/Android/)?(n="android",i=e.match(/Android[\s|\/]([\w\.]+)/),t=i&&i[1]):(n=null,t=null),{name:n,version:t}},getTypeFromUA:function(e){return/dp\/com\.dianping\.(\w+)\//.test(e)?e.match(/dp\/com\.dianping\.(\w+)\//)[1]:"web"},uaType:function(){return this.getTypeFromUA(navigator.userAgent)},_trace:function(e,n){if(this.hippoPrefix){var t=this._cfg&&this._cfg.logFact||.05;n=n||{},n=this._mixin(n,{module:this.hippoPrefix+"_"+e}),Math.random()<t&&(console.log("_trace",e),window._hip&&_hip.push(["mv",n]))}},log:function(){for(var e=[],n=0;n<arguments.length;n++)"string"==typeof arguments[n]?e.push(arguments[n]):void 0!=arguments[n]&&e.push(JSON.stringify(arguments[n]));e=e.join(" "),this._cfg&&this._cfg.debug?setTimeout(function(){alert(e)}):console.log(e)},_mixin:a,extend:function(e){return this._mixin(this,e)},_notImplemented:function(e){e&&e.fail&&e.fail({errMsg:"ERR_NOT_IMPLEMENTED"})},isSupport:function(e){var n=this[e];return!(!n||"function"!=typeof n||n==this._notImplemented||1==n._notReady)}},r.prototype._osUA=r.prototype._parseUA(navigator.userAgent)},{map:e({"./apis":a,"./decorate":r},p)}),define(o,[s],function(e,n,t,i,o){var a={},r=["appear","disappear"],s=e("./queue"),c=s(function(e){DPApp._doSendMessage(e.method,e.args,e.callback)});t.exports={_dequeueTimeout:null,dequeue:function(){var e=this;setTimeout(function(){DPApp&&DPApp.log&&DPApp.log("Dequeue"),clearTimeout(this._dequeueTimeout),e._dequeueTimeout=null,c.dequeue()},0)},ready:function(e){var n=this;this._send("ready",{success:function(){n._isReady=!0,e()}})},openScheme:function(e){var n=e.url,t=e.extra;t&&(n+="?"+this._convertUrlParams(t),delete e.extra,e.url=n),this._send("openScheme",e)},_sendMessage:function(e,n,t){var i=this;c.push({method:e,args:n,callback:t}),this._dequeueTimeout=setTimeout(function(){i.dequeue()},1e3)},_generateCallbackId:function(){var e=Math.floor(1e3*Math.random()),n=(+new Date).toString(),t=n.substr(n.length-5,5);return+(t+""+e)},_generateCallbackName:function(e){return"DPApp_callback_"+e},_doSendMessage:function(e,n,t){var i=t&&"function"==typeof t;this.log("调用方法",e,n);var o=i?this._generateCallbackId():0;i&&(window[this._generateCallbackName(o)]=t),n&&"object"==typeof n||(n={}),n.callbackId=o,n=JSON.stringify(n);var a="js://_?method="+e+"&args="+encodeURIComponent(n)+"&callbackId="+o;this.log("创建iframe "+e,"callbackId:"+o),this._createIframe(a)},_createNode:function(e,n){function t(){i.onload=i.onerror=null,i.parentNode&&i.parentNode.removeChild(i)}var i=document.createElement(n);i.style.display="none",i.onload=i.onerror=t,setTimeout(t,5e3),i.src=e,document.body.appendChild(i)},_createIframe:function(e){this._createNode(e,"iframe")},_send:function(e,n){n=n||{};var t=this,i=n.success,o=n.fail,a=n.handle,r=function(n){t.log("调用失败 "+e,n),o&&o.call(t,n)},s=function(n){t.log("调用成功 "+e,n),i&&i.call(t,n)},c=function(n){t.log("回调 "+e,n),a&&a.call(t,n)},u=i||o||a?function(e){var n=e.status;"next"!=e.result&&delete e.result,"success"==n?s&&s(e):"action"==n?c&&c(e):r&&r(e)}:null;this._sendMessage(e,n,u)},_convertUrlParams:function(e){var n=[];for(var t in e)n.push(t+"="+encodeURIComponent(e[t]));return n.join("&")},_sanitizeAjaxOpts:function(e){e.method=e.method||"get",e.data=e.data||"";var n=e.url,t=e.data;if("get"==e.method){var i=[];for(var o in t)t.hasOwnProperty(o)&&(t[o]||0===t[o])&&i.push(o+"="+encodeURIComponent(t[o]));i.length&&(n+=-1==n.indexOf("?")?"?":"&",n+=i.join("&")),e.url=n,delete e.data}return e},_parseFeed:function(e){var n;return e?e.constructor.toString().indexOf("Array")>=0?(n=[0,0,0,0,0,0,0,0],e.forEach(function(e){n[7-e]=1}),parseInt(n.join(""),2)):void 0:255},_transModel:function(e,n){function t(e){var n=function(e){var n,t,i,o=0;if(0==e.length)return o;for(n=0,i=e.length;i>n;n++)t=e.charCodeAt(n),o=(o<<5)-o+t,o|=0;return o},t=n(e);return"0x"+(65535&t^t>>>16).toString(16)}function i(e){return"[object Array]"==Object.prototype.toString.call(e)}function o(e){return"[object Object]"==Object.prototype.toString.call(e)}function a(e){if(o(e)){delete e.__name;for(var n in e){var t;r[n]&&(t=e[r[n]]=e[n],a(t),delete e[n])}}else i(e)&&e.forEach(function(e){a(e)});return e}if(!e)return n;var r={};return e.forEach(function(e){r[t(e)]=e}),a(n)},_capital:function(e){return e.slice(0,1).toUpperCase()+e.slice(1)},subscribe:function(e){function n(e){a[s]&&a[s].length&&a[s].forEach(function(n){n&&n(e)})}function t(){i&&(o[i]=n,e.success&&e.success())}var i,o=this,s=e.action,c=(e.success,e.handle);a[s]?(e.success&&e.success(),a[s].push(c)):(-1!=r.indexOf(s)?(i="on"+o._capital(s),"scroll"==s?this._send(i,{success:t}):t()):this._send("subscribe",{action:s,success:e.success,handle:n}),a[s]=[c])},unsubscribe:function(e){function n(){s[p]=NOOP}var t=e.action,i=e.success,o=e.handle,s=this,c=a[t]?a[t].indexOf(o):-1;if(-1!=c?(a[t].splice(c,1),i&&i(),a[t].length||(a[t]=null)):o||(a[t]=null),!a[t])if(-1!=r.indexOf(t)&&after7_6){var u="off"+s._capital(t),p="on"+s._capital(t);"scroll"==t?this._send(u,{success:n}):n()}else this._send("unsubscribe",{action:t,success:i})},getUA:function(){},callback:function(e,n){var t=window,i=this._generateCallbackName(e),o=window[i];o&&(this.log("触发回调 ","callbackId:"+e),setTimeout(function(){o&&o.call(self,n)}),("complete"==n.result||"error"==n.result)&&(t[i]=null,delete t[i]))}}},{map:e({"./queue":s},p)}),define(a,[],function(e,n,t,i,o){t.exports=["getVersion","getNetworkType","getContactList","pickContact","getRequestId","getDeviceInfo","clearStorage","store","retrieve","publish","subscribe","unsubscribe","openScheme","jumpToScheme","closeWindow","sendSMS","downloadImage","setBackgroundColor","setTitle","setLLButton","setLRButton","setRLButton","setRRButton","isInstalledApp","alert","prompt","confirm","actionSheet"]},{map:p}),define(r,[n],function(e,n,t,i,o){var a=e("promise");t.exports=function(e){var n=this,t=this.apis,e=this.allowBeforeReady;t.forEach(function(e){n[e]||(n[e]=n._notImplemented)}),t.forEach(function(t){var i=n[t];n[t]&&n[t]._decorated||(n[t]=function(o){var r=n._mixin({},o);n._trace(t+"_call");var s=r.success,c=r.fail,u=function(e){if(c)c(e);else if(n.onerror)n.onerror({api:t,err:e});else{var i=e.errMsg?e.errMsg:JSON.stringify(e),o=new Error(i);o.name="DPAppError",console.warn("`DPApp."+t+"` call faild"),n._trace("throw"),console.warn(new Error(o))}},p=+new Date;return r.success=function(e){n._trace(t+"_success",{time:+new Date-p}),s&&s(e)},r.fail=function(e){var i={};i.args=o,i.result=e,n._trace(t+"_fail",{time:+new Date-p,note:JSON.stringify(i)}),u(e)},this._isReady||-1!==e.indexOf(t)||n._isProduct||!n.isOldVersion()?new a(function(e,t){var o=r.success,a=r.fail,s=function(n){o(n),e(n)},u=function(e){a(e),c||t(e)};r.success=s,r.fail=u,i.call(n,r)}):void u("use `DPApp.ready(fn)` to wrap api calls")},n[t]._decorated=!0,n[t]._notReady=i==n._notImplemented)})}},{map:p}),define(s,[],function(e,n,t,i,o){t.exports=function(e){var n=null,t=null,i={timeout:null,running:!1,tasks:[],push:function(e,n){var t=n||function(e){};i.tasks.push({data:e,callback:t}),setTimeout(function(){i.process()},0)},dequeue:function(){t?t():i.running=!1},process:function(){if(i.tasks.length&&!i.running){var o=i.tasks.shift();i.running=!0,t=function(){i.running=!1,o.callback(o.data),i.process()},n=o.data,e(o.data,t)}}};return i}},{map:p})}(),function(){function e(e,n){for(var t in n)e[t]=n[t];return e}var n="dpapp-share@~0.1.0",t="dpapp@1.3.3/lib/core.js",i="dpapp@1.3.3/lib/util.js",o="dpapp@1.3.3/lib/apis.js",a="dpapp@1.3.3/lib/errortrace.js",r="dpapp@1.3.3/lib/web.js",s="dpapp@1.3.3/lib/patch/patch-7.0.0.js",c="dpapp@1.3.3/lib/patch/patch-7.1.0.js",u="dpapp@1.3.3/lib/patch/patch-7.2.0.js",p="dpapp@1.3.3/lib/patch/patch-7.5.0.js",l="dpapp@1.3.3/lib/patch/patch-7.6.0.js",f="dpapp@1.3.3/lib/patch/patch-7.8.0.js",d="dpapp@1.3.3/lib/patch/patch-7.9.1.js",h="dpapp@1.3.3/lib/patch/patch-7.9.4.js",g="dpapp@1.3.3/lib/patch/patch-7.9.6.js",m="dpapp@1.3.3/lib/patch/patch-8.0.0.js",v="dpapp@1.3.3/lib/patch/patch-8.0.4.js",y="dpapp-core@^1.1.1",b="mix@^1.0.1",w="dpapp@1.3.3/lib/async.js",_="dpapp@1.3.3/index.js",k=[n],x={"dpapp-share":n},I=x;define(_,[t,i,o,a,r,s,c,u,p,l,f,d,h,g,m,v],function(e,n,t,i,o){"use strict";!function(n){var i=e("./lib/core"),o=e("./lib/util"),a=e("./lib/apis");e("./lib/errortrace");var r=function(e,n){i.Semver.gte(o.appVersion,e)&&i.patchForType(o.appVersion,n)};r("7.0.0",e("./lib/patch/patch-7.0.0")),r("7.1.0",e("./lib/patch/patch-7.1.0")),r("7.2.0",e("./lib/patch/patch-7.2.0")),r("7.5.0",e("./lib/patch/patch-7.5.0")),r("7.6.0",e("./lib/patch/patch-7.6.0")),r("7.8.0",e("./lib/patch/patch-7.8.0")),r("7.9.1",e("./lib/patch/patch-7.9.1")),r("7.9.4",e("./lib/patch/patch-7.9.4")),r("7.9.6",e("./lib/patch/patch-7.9.6")),r("8.0.0",e("./lib/patch/patch-8.0.0")),r("8.0.4",e("./lib/patch/patch-8.0.4")),r("web",e("./lib/web")),i.apis=a,i.decorate(),a.forEach(function(e){i[e]||(i[e]=i._notImplemented)}),"undefined"!=typeof t&&(t.exports=i),"undefined"!=typeof n&&(n.DPApp?i._mixin(n.DPApp,i):n.DPApp=i)}(window)},{asyncDeps:k,main:!0,map:e({"./lib/core":t,"./lib/util":i,"./lib/apis":o,"./lib/errortrace":a,"./lib/web":r,"./lib/patch/patch-7.0.0":s,"./lib/patch/patch-7.1.0":c,"./lib/patch/patch-7.2.0":u,"./lib/patch/patch-7.5.0":p,"./lib/patch/patch-7.6.0":l,"./lib/patch/patch-7.8.0":f,"./lib/patch/patch-7.9.1":d,"./lib/patch/patch-7.9.4":h,"./lib/patch/patch-7.9.6":g,"./lib/patch/patch-8.0.0":m,"./lib/patch/patch-8.0.4":v},I)}),define(t,[y,b,i],function(e,n,t,i,o){"use strict";var a=e("dpapp-core"),r=e("mix"),s=e("./util"),c=function(){},u=t.exports=new a({hippoPrefix:"dpapp",getTypeFromUA:s.getWebviewVersion,apis:[],allowBeforeReady:["getRequestId"],isOldVersion:function(){return"6.9.x"==this.uaType()},cache:{},Share:{WECHAT_FRIENDS:0,WECHAT_TIMELINE:1,QQ:2,SMS:3,WEIBO:4,QZONE:5,EMAIL:6,COPY:7},_tidyUrlParams:function(e){var n=e.split("?"),t=n[1],i=[];return t?(t.split("&").forEach(function(e){var n=e.split("=")[0];/^(newtoken|token)$/.test(n)||i.push(e)}),[n[0],i.join("&")].join("?")):n[0]},_getEnv:function(e){var n=this;this._doSendMessage("getEnv",{},function(t){n.cache.env=t,e.call(this,t)})},_captal:function(e){return e.slice(0,1).toUpperCase()+e.slice(1)},_getBizName:function(e){var n=e.fail,t=this._cfg.bizname;return t?t:(n&&n('use `DPApp.config({bizname:"<your-bizname>"})` first'),!1)},isStatusOK:c,did_handle_callback:c,_doSendMessage:function(e,n,t){var i=t&&"function"==typeof t;this.log("调用方法",e,n);var o=i?this._generateCallbackId():0;i&&(window[this._generateCallbackName(o)]=t),n&&"object"==typeof n||(n={}),n.callbackId=o,n=JSON.stringify(n);var a=window._DPApp;if(a&&a._sendMessage)a._sendMessage(e,n,o);else{var r="js://_?method="+e+"&args="+encodeURIComponent(n)+"&callbackId="+o;this.log("创建iframe "+e,"callbackId:"+o),this._createIframe(r)}}});window.DPApp&&(u=r(window.DPApp,u))},{asyncDeps:k,map:e({"./util":i},I)}),define(i,[],function(e,n,t,i,o){"use strict";var a=/dp\/com\.dianping\.[\w\.]+\/([\d\.]+)/,r=function(e){var n,t=/MApi/,i=e.match(a);return n=i?i[1]:t.test(e)?"7.0.0":"web"},s=function(e){var n=/android/i,t=/ipad|iphone/i;return n.test(e)?"android":t.test(e)?"ios":void 0},c=function(e){if(e.match(a)){var n=/adapter\/([\d\.]+)/,t=e.match(n);if(t)return t[1]}},u=function(e){return c(e)||r(e)},p=r(navigator.userAgent),l=s(navigator.userAgent);t.exports={appVersion:p,getAppVersion:r,osName:l,getOSName:s,getWebviewVersion:u,actionMapping:function(e){return function(n){this._send(e,n)}}}},{asyncDeps:k,map:I}),define(o,[],function(e,n,t,i,o){t.exports=["getRequestId","isInstalledApp","getNetworkType","getVersion","getUserInfo","login","updateAccount","logout","getCityId","getLocation","getCity","setPullDown","stopPullDown","openScheme","jumpToScheme","closeWindow","getContactList","sendSMS","bindPhone","ajax","setSpotlight","store","retrieve","downloadImage","chooseImage","previewImage","playVoice","share","publish","subscribe","unsubscribe","alert","prompt","confirm","actionSheet","setTitle","setBackgroundColor","setNavigationBarHidden","setScrollEnabled","setLLButton","setLRButton","setRLButton","setRRButton","setBouncesEnabled","getCX"]},{asyncDeps:k,map:I}),define(a,[],function(e,n,t,i,o){"use strict";var a=window.onerror,r="http://114.80.165.63/broker-service/api/js";window.onerror=function(e,n,t,i,o){var s=encodeURIComponent,c=Date.now();(new window.Image).src=r+"?error="+s(e)+"&v=1&data="+s(o&&o.stack?o.stack:"")+"&url="+s(location.href)+"&file="+s(n)+"&line="+s(t)+"&col="+s(i)+"&timestamp="+c,a&&a(e,n,t,i,o)}},{asyncDeps:k,map:I}),define(r,[b,o],function(e,n,t,i,o){"use strict";function a(e){return function(n){var t=JSON.stringify(n),i=n.success,o=n.fail,a=n.handle,r=document.createElement("script"),s="jsonp_callback"+d;d++,r.src="http://localhost:1943/?method="+e+"&params="+encodeURIComponent(t)+"&callback="+s,window[s]=function(e){var n=e.status;"success"==n?i&&i(e):"action"==n?a&&a(e):o&&o(e)},document.body.appendChild(r)}}var r=e("mix"),s=e("./apis"),c={},u="webkitvisibilitychange",p="scroll";r(c,{version:"web",getUA:function(e){var n=e&&e.success,t={platform:"web",appName:null,appVersion:null,osName:this._osUA.name,osVersion:this._osUA.version};return n&&n(t),t},ready:function(e){var n=this,t=/complete|loaded|interactive/;t.test(document.readyState)&&document.body?(n._isReady=!0,e()):document.addEventListener("DOMContentLoaded",function(){n._isReady=!0,e()},!1)},ajax:function(e){function n(e){var n="";for(var t in e)n+=t+"="+encodeURIComponent(e[t]);return n}var t="GET",i=e.url,o=(e.method||t).toUpperCase(),a=e.headers||{},r=e.data,s=e.success,c=e.fail,u=new XMLHttpRequest;i||(i=location.href.split("?")[0]),o===t&&r&&(i+=n(r),r=null),o!==t&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.onreadystatechange=function(){if(4==u.readyState){u.onreadystatechange=function(){};var e,n=!1;if(u.status>=200&&u.status<300||304==u.status){e=u.responseText;try{e=/^\s*$/.test(e)?null:JSON.parse(e)}catch(t){n=t}n?c&&c("ERR_PARSE_JSON"):s(e)}else c&&c(u.statusText)}},u.open(e.method,i,!0,e.username,e.password);for(var p in a)u.setRequestHeader(p,a[p]);u.send(r)},closeWindow:function(){window.close()}}),r(c,{getLocation:function(e){var n=e.success,t=e.fail;navigator.geolocation.getCurrentPosition(function(e){n&&n({lat:e.coords.latitude,lng:e.coords.longitude})},function(){t&&t("ERR_GET_LOCATION")})},getCityId:function(e){var n,t=function(e){return n||(n={},document.cookie.split(";").forEach(function(e){var t=e.trim().split("="),i=t[0],o=t[1];n[i]=o})),n[e]},i=t("cy")||t("cityid");i||(i=null),e&&e.success&&e.success({cityId:i})},getCity:function(e){return this.getCityId(e)}}),r(c,{share:function(n){var t=n.success,i=n.title,o=n.desc,a=n.content,r=n.image,s=n.url;e.async("dpapp-share",function(e){e.pop({title:i,desc:o,content:a,pic:r,url:s}),t&&t()})}}),r(c,{setTitle:function(e){var n=e.title;n&&(document.title=n),e.success&&e.success()}});var l={};r(c,{subscribe:function(e){var n=this,t=e.action,i=e.success,o=e.handle,a=e.fail;return t&&o?(l[t]?l[t].push(o):l[t]=[o],t==p&&window.addEventListener(p,n._scrollEvent),"appear"==t&&document.addEventListener(u,n._appearEvent),"disappear"==t&&document.addEventListener(u,n._disappearEvent),void(i&&i())):void(a&&a("missing params"))},_appearEvent:function(){0==document.hidden&&DPApp.publish({action:"appear"})},_disappearEvent:function(){1==document.hidden&&DPApp.publish({action:"disappear"})},_scrollEvent:function(){DPApp.publish({action:p,data:{offset:window.scrollY}})},unsubscribe:function(e){var n=this,t=e.action,i=e.success,o=e.handle,a=e.fail;if(!t)return void(a&&a("Missing params"));var r=l,s=r[t];if(!s)return void(i&&i());if(o){var c=s.indexOf(o);r[t]=s.splice(c,1)}else t==p&&window.removeEventListener(p,n._scrollEvent),delete r[t];i&&i()},openScheme:function(e){var n=document.createElement("iframe"),t=e.extra,i=e.url;t&&(i+="?"+this._convertUrlParams(t),delete e.extra),n.style.display="none",n.src=i,document.body.appendChild(n)},publish:function(e){if(e.action){var n=e.action,t=e.data,i=e.success,o=l[n];o&&o.forEach(function(e){e(t)}),i&&i()}}});var f=document.cookie.match(/dpapp-mocker=(\w+)/);f&&(f=f[1]);var d=1;s.forEach(function(e){"force"==f?c[e]=a(e):c.hasOwnProperty(e)||"patch"==f&&(c[e]=a(e))}),t.exports=c},{asyncDeps:k,map:e({"./apis":o},I)}),define(s,[i],function(e,n,t,i,o){"use strict";var a=e("../util");t.exports={appVersion:"7.0",_parseFeed:function(e){var n;return e?e.constructor.toString().indexOf("Array")>=0?(n=[0,0,0,0,0,0,0,0],e.forEach(function(e){n[e]=1}),parseInt(n.join(""),2)):void 0:255},share:function(e){e.feed=this._parseFeed(e.feed),e.url=this._tidyUrlParams(e.url),this._sendMessage("share",e)},initShare:function(e){var n=e.success,t=e.fail,i="dpshare://_?content=";
i+=encodeURIComponent(JSON.stringify({title:e.title,desc:e.desc,image:e.image,feed:this._parseFeed(e.feed),url:e.url})),this.shareCallback=function(e){"success"==e.status?n&&n(e):t&&t(e)},this._createIframe(i)},getUA:function(e){var n=e&&e.success,t=navigator.userAgent.match(/MApi\s[\w\.]+\s\([\w\.\d]+\s([\d\.]+)/)[1],i={platform:"dpapp",appName:"dianping",appVersion:t,osName:this._osUA.name,osVersion:this._osUA.version};return n&&n(i),i},ready:function(e){this._isReady=!0,e()},pay:function(e){function n(e,n){DPApp.ajax({url:"http://api.p.dianping.com/payorder.pay",data:e,keys:["Content"],success:function(e){n(null,e)},fail:function(){n("fail payorder")}})}function t(e){var n=7,t="5:1:null#219#0",i="11:1:null#217#0";return e==n?paymentTool=i:paymentTool=t,paymentTool}var i=this,o=e.payType,a=e.success,r=e.fail,s=e.cx;n({token:e.token,orderid:e.orderId,paymenttool:t(o),cx:s},function(e,n){return e?r&&r(e):void i._sendMessage("pay",{paytype:o,paycontent:n.Content},function(e){e.payresult?a&&a(e):r&&r(e)})})},uploadImage:function(e){var n=e.fail,t=e.handle;this._sendMessage("uploadImage",e,function(e){var i=e.status;return"fail"==i?void(n&&n(e)):void(t&&t(e))})},ajax:function(e){e=this._sanitizeAjaxOpts(e);var n=e.success;e.success=function(t){var i=JSON.parse(t.mapiResult);i=this._transModel(e.keys,i),n(i)},this._send("mapi",e)},getCX:a.actionMapping("getCX"),getContactList:a.actionMapping("getContactList"),getRequestId:a.actionMapping("getRequestId"),closeWindow:a.actionMapping("close_web"),getUserInfo:a.actionMapping("getUserInfo"),getCity:a.actionMapping("getCityId"),getCityId:a.actionMapping("getCityId"),getLocation:a.actionMapping("getLocation")}},{asyncDeps:k,map:e({"../util":i},I)}),define(c,[i,t,s],function(e,n,t,i,o){"use strict";function a(e){var n="on"+s._captal(e);return"android"==r.osName&&"7.6.0"==r.appVersion&&/appear|disappear/.test(e)&&(n=e),n}var r=e("../util"),s=e("../core"),c=e("./patch-7.0.0"),u=["setLLButton","setLRButton","setRLButton","setRRButton","setTitle","sendSMS","publish","closeWindow"],p={},l=["appear","disappear","scroll"],f=function(){var e=navigator.userAgent,n=e.match(/dp\/[\w\.\d]+\/([\d\.]+)/),t=n&&n[1],i=e.match(/dp\/(com\.dianping\.\w+)/),o=i&&i[1],a=e.match(/adapter\/([\d\.]+)/),r=a&&a[1];return function(e){var n=e&&e.success,i={platform:"dpapp",appName:"dianping",packageId:o,appVersion:t,osName:s._osUA.name,osVersion:s._osUA.version,adapterVersion:r};return n&&n(i),i}}(),d=t.exports={appVersion:"7.1.0",pay:c.pay,uploadImage:c.uploadImage,getUA:f,ready:function(e){var n=this;this._send("ready",{success:function(){n._isReady=!0,e()}})},login:function(e){function n(e){i.getUserInfo({success:e})}var t,i=this;n(function(o){if(o.token)e.success&&e.success(o);else{var a="loginSuccess",r="appear",s=function(){n(function(e){t=e}),i.unsubscribe({action:a,handle:s})};i.subscribe({action:a,handle:s});var c=function(){n(function(n){n&&n.token?e.success&&e.success(n):e.fail&&e.fail()}),i.unsubscribe({action:r,handle:c})};i.subscribe({action:r,handle:c}),i.openScheme({url:"dianping://login"})}})},updateAccount:function(e){e=e||{};var n=this,t=document.cookie.match(/dper=\w+/);if(t&&(t=t[0].split("=")[1]),e.dper&&(t=e.dper),!t)return e.fail&&e.fail("Missing dper");var i=function(e,t){function i(){n.getUserInfo({success:function(n){n.token?e&&e(n):o>5?t&&t():(o++,setTimeout(function(){i()},100))}})}var o=0;i()};n.ajax({url:"http://m.api.dianping.com/mlogin/convertdper.api",data:{dper:t},keys:["Token","NewToken"],success:function(t){var o=n.getUA();n.Semver.gte(o.appVersion,"7.5.0")?n._send("updateAccount",{token:t.Token,newtoken:t.NewToken,success:function(){n.getUserInfo({success:e.success})},fail:e.fail}):(n._send("loginsuccess",{token:t.Token,newtoken:t.NewToken}),i(e.success,e.fail))},fail:e.fail})},_parseFeed:function(e){var n;return e?e.constructor.toString().indexOf("Array")>=0?(n=[0,0,0,0,0,0,0,0],e.forEach(function(e){n[7-e]=1}),parseInt(n.join(""),2)):void 0:255},share:function(e){e.feed=this._parseFeed(e.feed),e.url=this._tidyUrlParams(e.url),this._send("share",e)},initShare:function(e){var n=this;this.setRRButton({icon:"H5_Share",handle:function(){e.handle&&e.handle(),n.share({title:e.title,desc:e.desc,content:e.content,image:e.image,feed:e.feed,url:e.url,success:e.success,fail:e.fail})}})},subscribe:function(e){function n(e){p[t]&&p[t].length&&p[t].forEach(function(n){n&&n(e)})}var t=e.action,i=e.handle;p[t]?(e.success&&e.success(),p[t].push(i)):(this._send("subscribe",{action:t,success:e.success,handle:n}),p[t]=[i])},unsubscribe:function(e){var n=e.action,t=e.success,i=e.handle,o=p[n]?p[n].indexOf(i):-1;-1!=o?(p[n].splice(o,1),t&&t(),p[n].length||(p[n]=null)):i||(p[n]=null),p[n]||this._send("unsubscribe",{action:n,success:t})},openScheme:function(e){var n=e.url,t=e.extra;t&&(n+="?"+this._convertUrlParams(t),delete e.extra,e.url=n),this._send("openScheme",e)}};u.forEach(function(e){d[e]=r.actionMapping(e)}),l.forEach(function(e){d[a(e)]=function(){}})},{asyncDeps:k,map:e({"../util":i,"../core":t,"./patch-7.0.0":s},I)}),define(u,[],function(e,n,t,i,o){"use strict";t.exports={appVersion:"7.2.0",jumpToScheme:function(e){var n=e.url,t=e.extra;t&&(n+="?"+this._convertUrlParams(t),delete e.extra,e.url=n),e.toHome=e.toHome?1:0,this._send("jumpToScheme",e)},publish:function(e){var n=this._getBizName(e),t=["phoneChanged","AccountBindChange"];n&&(-1==t.indexOf(e.action)&&(e.action=n+":"+e.action),this._send("publish",e))}}},{asyncDeps:k,map:I}),define(p,[i],function(e,n,t,i,o){"use strict";var a=e("../util");t.exports={appVersion:"7.5.0",store:function(e){var n=this._getBizName(e);n&&(e.key=n+":"+e.key,this._send("store",e))},retrieve:function(e){var n=this._getBizName(e);-1===e.key.indexOf(":")&&(e.key=n+":"+e.key),this._send("retrieve",e)},setBackgroundColor:a.actionMapping("setBackgroundColor")}},{asyncDeps:k,map:e({"../util":i},I)}),define(l,[t,i],function(e,n,t,i,o){"use strict";function a(e){var n="on"+s._captal(e);return"android"==r.osName&&"7.6.0"==r.appVersion&&/appear|disappear/.test(e)&&(n=e),n}var r=e("../util"),s=e("../core"),c={},u=["appear","disappear","scroll"];t.exports={appVersion:"7.6.0",isInstalledApp:r.actionMapping("isInstalledApp"),subscribe:function(e){function n(e){c[r]&&c[r].length&&c[r].forEach(function(n){n&&n(e)})}function t(){i&&(window.DPApp&&(window.DPApp[a(r)]=n),e.success&&e.success())}var i,o=this,r=e.action,s=e.handle;c[r]?(e.success&&e.success(),c[r].push(s)):(-1!==u.indexOf(r)?(i="on"+o._captal(r),"scroll"==r?this._send(i,{success:t}):t()):this._send("subscribe",{action:r,success:e.success,handle:n}),c[r]=[s])},unsubscribe:function(e){function n(){a[p]=function(){}}var t=e.action,i=e.success,o=e.handle,a=this,r=c[t]?c[t].indexOf(o):-1;if(-1!=r?(c[t].splice(r,1),i&&i(),c[t].length||(c[t]=null)):o||(c[t]=null),!c[t])if(-1!==u.indexOf(t)){var s="off"+a._captal(t),p="on"+a._captal(t);"scroll"==t?this._send(s,{success:n}):n()}else this._send("unsubscribe",{action:t,success:i})}}},{asyncDeps:k,map:e({"../core":t,"../util":i},I)}),define(f,[i],function(e,n,t,i,o){"use strict";var a=e("../util"),r=["alert","confirm","actionSheet","prompt","setPullDown","stopPullDown","downloadImage"],s={appVersion:"7.8.0"};r.forEach(function(e){var n=a.actionMapping(e);s[e]=n}),s.prompt=function(e){e.placeholder||(e.placeholder=""),this._send("prompt",e)},t.exports=s},{asyncDeps:k,map:e({"../util":i},I)}),define(d,[w,t,i],function(e,n,t,i,o){"use strict";var a=e("../util"),r=e("../async"),s=e("../core");t.exports={appVersion:"7.9.1",setNavigationBarHidden:a.actionMapping("setNavigationBarHidden"),chooseImage:function(e){e=e||{},e.count=!e.count||e.count>9||e.count<1?9:e.count,this._send("chooseImage",e)},uploadImage:function(e){var n=e.success,t=e.fail,i=e.handle,o=this.getUA(),a=this;e.localId||e.localIds?s.Semver.gte(o.adapterVersion||o.appVersion,"7.9.1")?e.localIds?!function(e){var i={},o=[];r.mapSeries(e,function(e,n){a._send("uploadPhoto",{localId:e,success:function(t){i[e]=t.picKey,o.push({localId:e,picKey:t.picKey}),n(null)},fail:function(e){n(e)}})},function(e){e?t&&t(e):n&&n({picKeys:i,photoInfos:o})})}(e.localIds):this._send("uploadPhoto",e):t({errMsg:"ERR_NOT_IMPLEMENTED"}):this._sendMessage("uploadImage",e,function(e){var n=e.status;return"fail"==n?void(t&&t(e)):void(i&&i(e))})}}},{asyncDeps:k,map:e({"../async":w,"../core":t,"../util":i},I)}),define(h,[i],function(e,n,t,i,o){"use strict";var a=e("../util");t.exports={appVersion:"7.9.4",setSpotlight:function(e){e.webpageURL&&(e.scheme||(e.scheme="dianping://web?url="+encodeURIComponent(e.webpageURL)),this._send("setSpotlight",e))},playVoice:a.actionMapping("playVoice")}},{asyncDeps:k,map:e({"../util":i},I)}),define(g,[],function(e,n,t,i,o){"use strict";t.exports={appVersion:"7.9.6",logout:function(e){var n;1===e.type?n="dianping://me":2===e.type&&(n="dianping://home"),n&&(e.success=function(){this.openScheme({url:n})}),this._send("logout",e)}}},{asyncDeps:k,map:I}),define(m,[i],function(e,n,t,i,o){"use strict";var a=e("../util");t.exports={appVersion:"8.0.0",setScrollEnabled:a.actionMapping("setScrollEnabled"),setBouncesEnabled:a.actionMapping("setBouncesEnabled"),bindPhone:a.actionMapping("bindPhone"),pay:a.actionMapping("pay")}},{asyncDeps:k,map:e({"../util":i},I)}),define(v,[i],function(e,n,t,i,o){"use strict";var a=e("../util"),r={appVersion:"8.0.4",thirdLogin:function(e){var n,t=e.type;switch(t){case 1:n="http://m.dianping.com/auth/app?ft=15&sso=true";break;case 2:n="http://m.dianping.com/auth/app?ft=6&sso=true&redir=";break;case 3:n="http://m.dianping.com/auth/app?ft=5&ssp=true&redir=";break;case 4:n="http://m.dianping.com/auth/app?ft=2&source=1&sso=true&redir="}this.openScheme({url:"dianping://loginweb?url="+encodeURIComponent(n)+"&isFromNative=true"})},getCX:function(e){var n=e.success;e.success=function(e){e.fingerprint&&(e.cx=e.fingerprint),n(e)},this._send("getCX",e)},uploadImage:function(e){var n=e.success,t=e.fail,i=e.handle;e.localId||e.localIds?(e.localId&&(e.localIds=[e.localId],delete e.localId),e.success=function(t){var i,o={};t.ret&&(t.ret.forEach(function(n,t){i=n.localId||e.localIds[t],o[i]=n.picKey}),t.photoInfos=t.ret,delete t.ret),t.picKeys=o,n(t)},this._send("uploadPhoto",e)):this._sendMessage("uploadImage",e,function(e){var n=e.status;return"fail"==n?void(t&&t(e)):void(i&&i(e))})}};"ios"===a.osName&&(r.setStatusBarStyle=function(e){void 0===e.style&&(e.style=0),this._send("setStatusBarStyle",e)}),t.exports=r},{asyncDeps:k,map:e({"../util":i},I)}),define(w,[],function(e,n,t,i,o){"use strict";n.mapSeries=function(e,n,t){function i(s,c){return s?t(s):(a++,r.push(c),void(a!==o?n(e[a],i):t(null,r)))}var o=e.length,a=0,r=[];n(e[a],i)}},{asyncDeps:k,map:I})}(),_use("dpapp@1.3.3",function(){});
//# sourceMappingURL=src/standalone.js.map